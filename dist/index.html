<!doctype html>
<html lang="en-us">
  <head>

    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Self Learning 3d Cars (loading)</title>

    <style>
      body, h1, h2, p, ul, li {
        background-color: #0F0F0F;
        color: #8F8F8F;
        border: 0px 0px 0px 0px;
        margin: 0px 0px 0px 0px;
        padding: 0px 0px 0px 0px;
        font-family: arial;
      }

      ul {
        padding: 0px 0px 0px 20px;
        font-family: arial;
      }

      h1 {
        font-size: 30px;
      }

      h2 {
        font-size: 20px;
      }

      h3 {
        font-size: 16px;
        border: 7px 0px 0px 0px;
        margin: 7px 0px 0px 0px;
        padding: 7px 0px 0px 0px;
      }

      #renderArea {
        border: 0px none;
        margin: 0px auto; /* horizontally centered */
        padding: 0px none;

        background-color: black;
        width: 800px;
        height: 600px;
      }

      #title-description {
        text-align: center;
      }

      #text-description {
        text-align: center;
      }

      #sub-text-description {
        width: 400px;
        margin: 0px auto; /* horizontally centered */
        text-align: left;
      }

      /* the canvas *must not* have any border or padding, or mouse coords will be wrong */
      #canvas {
        border: 0px none;
        margin: 0px auto; /* horizontally centered */
        padding: 0px none;
        width: 800px; /* <= fix Apple retina display issue(s)*/
        height: 600px; /* <= fix Apple retina display issue(s)*/
        display: none;
      }

      #errorText {
        position: relative;
        left: 10px;
        top: 10px;
        margin: 0px auto; /* horizontally centered */
        padding: 0px none;
        border: 0px none;
        color: white;
        font-family: 'Lucida Console', Monaco, monospace;
        text-align: center;
        outline: none;
        display: block;
      }

      #loggerOutput {
        width: 99%;
        margin: 0px auto; /* horizontally centered */
        border: 0px none;
        padding: 0px none;
        background-color: black;
        color: white;
        font-family: 'Lucida Console', Monaco, monospace;
        outline: none;
        display: block;
      }

      .button {
        background-color: #4CAF50; /* Green */
        border: none;
        color: white;
        padding: 5px 10px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
      }

      .blueButton {
        background-color: #44A;
      }

      .redButton {
        background-color: #A44;
      }

      .grayButton {
        background-color: #666;
        color: #999;
      }

      .redText {
        color: #C88;
      }
    </style>

    <script type="module" src="js/bundle.js"></script>
  </head>
  <body>

    <div id="title-description">
      <h1>Self Learning 3d Cars</h1>
      <h2>Machine Learning / Artificial Intelligence / Genetic Algorithm
        <span class="redText">(Source Code:
        <a class="redText" href="https://github.com/GuillaumeBouchetEpitech/self-learning-3d-cars">GitHub link</a>)</span></h2>
    </div>

    <div id="renderArea">
      <canvas id="canvas" width="800" height="600"></canvas>
      <p id="errorText">Loading</p>
    </div>

    <div id="title-description">
      <h2 class="redText">You can also scroll down (if curious).</h2>
    </div>

    <textarea id="loggerOutput" rows="10" readonly></textarea>

    <div id="text-description">

      <br/>

      <h2>Change the total amount of cpu cores:</h2>
      <p>(This will reload the page)</p>
      <div>
        <button id="try_with_3_cpu_cores" class="button grayButton">switch to 3 cpu cores</button>
        <button id="try_with_6_cpu_cores" class="button grayButton">switch to 6 cpu cores</button>
      </div>

      <br/>

      <h2>Source Code:</h2>
      <p class="redText"><a class="redText" href="https://github.com/GuillaumeBouchetEpitech/self-learning-3d-cars">GitHub link</a></p>

      <br/>

      <h2>FAQs:</h2>
      <div id="sub-text-description">

        <h3>Camera controls?</h3>
        <ul>
          <li>You can use:</li>
          <ul>
            <li>a keyboard</li>
            <ul>
              <li>they arrows keys</li>
              <li>they WASD keys (UK/US)</li>
              <li>they ZQSD keys (FR)</li>
            </ul>
            <li>a computer mouse (click+drag)</li>
            <li>a touch screen (touch+drag)</li>
          </ul>
        </ul>

        <h3>What are the white strips on the circuit?</h3>
        <ul>
          <li>The checkpoints used to reward the cars.</li>
          <li>All cars lose "health" value over time.</li>
          <li>Any car with low "health" is discarded.</li>
          <li>Any car being rewarded become "healthy".</li>
          <li>This is visible as cars color will change.</li>
          <ul>
            <li>from white/green colored to red colored.</li>
          </ul>
        </ul>

        <h3>What are the colored lines on the leading car?</h3>
        <ul>
          <li>The car's sensors, it's "eye".</li>
          <li>The sensors:</li>
          <ul>
            <li>can hit the ground and the "walls".</li>
            <li>are the only inputs the cars uses.</li>
            <ul>
              <li>decide to accelerate/decelerate.</li>
              <li>decide to turn left/right.</li>
            </ul>
          </ul>
        </ul>

        <h3>What is the white line below the leading car?</h3>
        <ul>
          <li>The car's "ground sensor".</li>
          <li>It detect the checkpoints (for the rewards).</li>
        </ul>

        <h3>What are the white/grey lines alongside the circuit?</h3>
        <ul>
          <li>The "skeleton" used to generate the circuit.</li>
          <li>The circuit is made by interpolating the "skeleton".</li>
          <ul>
            <li>it uses the BSpline method (degree: 3).</li>
          </ul>
        </ul>

      </div>

      <br/>

      <h2>Technologies</h2>
      <div id="sub-text-description">
        <ul>
          <li>this project was written in C++.</li>
          <li>the web version was compiled to WebAssembly.</li>
          <ul>
            <li>the source code of the native build is reused.</li>
            <li>it relies on emscripten (clang based compiler).</li>
          </ul>
          <li>it uses "Bullet Physics" (bullet3) for the physic.</li>
          <li>it uses a homemade rendering engine.</li>
          <ul>
            <li>native build: rely on OpenGL-ES3.</li>
            <li>WebAssembly build: is translated to WebGL2.</li>
          </ul>
          <li>it uses a homemade machine learning library.</li>
          <ul>
            <li>very basic fixed topology genetic algorithm.</li>
          </ul>
          <li>it is composed of 3 builds:</li>
          <ul>
            <li><u>build 1:</u> native build.</li>
            <ul>
              <li>multithreading for parallel computing (pthread).</li>
            </ul>
            <li><u>build 2:</u>: WebAssembly build (#1).</li>
            <ul>
              <li>multithreading for parallel computing (pthread).</li>
              <ul>
                <li>only when the server and browser allows it.</li>
              </ul>
            </ul>
            <li><u>build 3:</u>: WebAssembly build (#2).</li>
            <ul>
              <li>webworkers for parallel computing.</li>
              <ul>
                <li>as a fallback when <u>build 2</u> is unavailable.</li>
              </ul>
            </ul>
          </ul>
          <li>it was built on a Linux OS.</li>
        </ul>
      </div>

      <br/>
      <h2>Note</h2>
      <p>The 'success' of this simulation is quite random, which means that sometime <b>you might want to reload this page</b> and hope for a better result.</p>

      <br/>
      <h2 class="redText">Thank you for watching!</h2>
      <br/>

    </div>
  </body>
</html>
